<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:decorate template="/template/template.xhtml">
    	<ui:define name="title">
    		Casos de Uso
    	</ui:define>
        <ui:define name="conteudo">
           
           <!-- <p:growl id="growl" showDetail="true" autoUpdate="true" closable="true" sticky="true" /> -->
           <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
                      
            <h:form id="formCaso">
	            <p:fieldset legend="Dados do Caso de Uso">
	            	 <p:panelGrid>
	            	 	<f:facet name="header">
	            	 		<p:row>
			            		<p:column>Código</p:column>
	            				<p:column>Nome</p:column>
	            				<p:column>Tipo Caso de Uso</p:column>
	            				<p:column>Objetivo</p:column>
	            			</p:row>
	            		</f:facet>
	            		
	            		<p:row>
		            		<p:column><h:outputText value="#{casoDeUsoMB.casoDeUso.codigo}" size="10" /></p:column> 
		            		<p:column><h:outputText value="#{casoDeUsoMB.casoDeUso.nome}" size="30" /></p:column>
		            		<p:column><h:outputText value="#{casoDeUsoMB.casoDeUso.tipo}" /></p:column>
		            		<p:column><h:outputText value="#{casoDeUsoMB.casoDeUso.objetivo}" /></p:column>
	            		</p:row>
	            	</p:panelGrid>
	            </p:fieldset>
            </h:form>
            
            <br /><br />
            
            <p:fieldset legend="Detalhes do Caso de Uso">
            	<p:tabView id="tabCaso">
            	
            		<p:tab title="Atores">
            	
            			<h:form id="formInfoCaso1">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Nome" />
	            				<p:selectOneMenu value="#{casoDeUsoAtorMB.atorId}">
	            					<f:selectItems value="#{casoDeUsoAtorMB.listAtores}" var="ator" itemLabel="#{ator.nome}" itemValue="#{ator.id}" />
	            				</p:selectOneMenu>
	            				<p:outputLabel value="Tipo de Ator" />
	            				<p:selectOneMenu value="#{casoDeUsoAtorMB.casoAtor.tipoAtor}">
		          					<f:selectItem itemLabel="Primário" itemValue="Primario" />  
		            				<f:selectItem itemLabel="Secundário" itemValue="Secundario" /> 
		          				</p:selectOneMenu>
	            				<p:commandButton value="Gravar" actionListener="#{casoDeUsoAtorMB.salvar}" update=":tabCaso:formAtores" />
	            			</h:panelGrid>
	            		</h:form>
            	
            			<h:form id="formAtores">
							<p:dataTable var="casoAtor" value="#{casoDeUsoAtorMB.listCasoAtor}" style="width:500px">
								<f:facet name="header">  
						            Atores  
						        </f:facet> 
								<p:column headerText="Nome" style="width:45%">
									<h:outputText value="#{casoAtor.ator.nome}" />
								</p:column>
								<p:column headerText="Tipo" style="width:45%">
									<h:outputText value="#{casoAtor.tipoAtor}" />
								</p:column>
								<p:column style="width:10%">
									<p:commandButton actionListener="#{casoDeUsoAtorMB.escolhe}" update=":formRemoverAtor" oncomplete="modalRemoverAtor.show();" icon="ui-icon-trash" />
								</p:column>
							</p:dataTable>
	            		</h:form>
            		</p:tab>
            	
            	
            		<p:tab title="Pré-Condições">
            	
            			<h:form id="formInfoCaso2">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Pré-Condição" />
	            				<p:inputText value="#{preCondicaoMB.pre.descricao}" />
	            				<p:commandButton value="Gravar" actionListener="#{preCondicaoMB.salvar}" update=":tabCaso:formPre" />
	            			</h:panelGrid>
	            		</h:form>
	            
	            		<h:form id="formPre">
	            			<p:dataTable var="precondicao" value="#{preCondicaoMB.list}" style="width:500px">
	            				<f:facet name="header">
	            					Pré-Condições
	            				</f:facet>
	            				<p:column headerText="Número" style="width:15%">
									<h:outputText value="#{precondicao.id}" />
								</p:column>
								<p:column headerText="Pré-Condição" style="width:75%">
									<h:outputText value="#{precondicao.descricao}" />
								</p:column>
								<p:column style="width:10%">
									<p:commandButton actionListener="#{preCondicaoMB.escolhe}" update=":formRemoverPre" oncomplete="modalRemoverPre.show();" icon="ui-icon-trash" />
								</p:column>
	            			</p:dataTable>
	            		</h:form>
            	
            		</p:tab>
            	
            	
            		<p:tab title="Pós-Condições">
            	
            			<h:form id="formInfoCaso3">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Pós-Condição" />
	            				<p:inputText value="#{posCondicaoMB.pos.descricao}" />
	            				<p:commandButton value="Gravar" actionListener="#{posCondicaoMB.salvar}" update=":tabCaso:formPos" />
	            			</h:panelGrid>
	            		</h:form>
	            
	            		<h:form id="formPos">
	            			<p:dataTable var="poscondicao" value="#{posCondicaoMB.list}" style="width:500px">
	            				<f:facet name="header">
	            					Pós-Condições
	            				</f:facet>
	            				<p:column headerText="Número" style="width:15%">
									<h:outputText value="#{poscondicao.id}" />
								</p:column>
								<p:column headerText="Pós-Condição" style="width:75%">
									<h:outputText value="#{poscondicao.descricao}" />
								</p:column>
								<p:column style="width:10%">
									<p:commandButton actionListener="#{posCondicaoMB.escolhe}" update=":formRemoverPos" oncomplete="modalRemoverPos.show();" icon="ui-icon-trash" />
								</p:column>
	            			</p:dataTable>
	            		</h:form>
            	
            		</p:tab>
            	
            	
            		<p:tab title="Regras de Negócio">
            	
            			<h:form id="formInfoCaso4">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Regra de Negócio" />
	            				<p:inputText value="#{regraDeNegocioMB.regra.descricao}" />
	            				<p:commandButton value="Gravar" actionListener="#{regraDeNegocioMB.salvar}" update=":tabCaso:formRegra" />
	            			</h:panelGrid>
	            		</h:form>
	            
	            		<h:form id="formRegra">
	            			<p:dataTable var="regra" value="#{regraDeNegocioMB.list}" style="width:500px">
	            				<f:facet name="header">
	            					Regras de Negócio
	            				</f:facet>
	            				<p:column headerText="Número" style="width:15%">
									<h:outputText value="#{regra.id}" />
								</p:column>
								<p:column headerText="Regra de Negócio" style="width:75%">
									<h:outputText value="#{regra.descricao}" />
								</p:column>
								<p:column style="width:10%">
									<p:commandButton actionListener="#{regraDeNegocioMB.escolhe}" update=":formRemoverRegra" oncomplete="modalRemoverRegra.show();" icon="ui-icon-trash" />
									<h:outputText value="remover" />
								</p:column>
	            			</p:dataTable>
	            		</h:form>
            	
            		</p:tab>
            		
            		
            		<p:tab title="Requisito Não Funcional">
            	
            			<h:form id="formInfoCaso6">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Requisito Não Funcional" />
	            				<p:inputText value="#{requisitoNaoFuncionalMB.req.descricao}" />
	            				<p:commandButton value="Gravar" actionListener="#{requisitoNaoFuncionalMB.salvar}" update=":tabCaso:formRequisito" />
	            			</h:panelGrid>
	            		</h:form>
	            
	            		<h:form id="formRequisito">
	            			<p:dataTable var="requisito" value="#{requisitoNaoFuncionalMB.list}" style="width:500px">
	            				<f:facet name="header">
	            					Requisitos Não Funcionais
	            				</f:facet>
	            				<p:column headerText="Número" style="width:15%">
									<h:outputText value="#{requisito.id}" />
								</p:column>
								<p:column headerText="Requisito Não Funcional" style="width:75%">
									<h:outputText value="#{requisito.descricao}" />
								</p:column>
								<p:column style="width:10%">
									<p:commandButton actionListener="#{requisitoNaoFuncionalMB.escolhe}" update=":formRemoverRequisito" oncomplete="modalRemoverRequisito.show();" icon="ui-icon-trash" />
									<h:outputText value="remover" />
								</p:column>
	            			</p:dataTable>
	            		</h:form>
            	
            		</p:tab>
            		
            	
            		<p:tab title="Fluxos">
            	
            			<h:form id="formInfoCaso5">
	            			<h:panelGrid columns="2">
	            				<p:outputLabel value="Código" />
	            				<p:inputText value="#{fluxoMB.fluxo.codigo}" />
	            				<p:outputLabel value="Tipo" />
	            				<p:selectOneMenu value="#{fluxoMB.fluxo.tipo}">
	            					<f:selectItem itemLabel="Principal" itemValue="Principal" />
	            					<f:selectItem itemLabel="Exceção" itemValue="Excecao" />
	            					<f:selectItem itemLabel="Alternativo" itemValue="Alternativo" />
	            				</p:selectOneMenu>
	            				<p:outputLabel value="Nome" />
	            				<p:inputText value="#{fluxoMB.fluxo.nome}" />
	            				<p:commandButton value="Gravar" actionListener="#{fluxoMB.salvar}" update=":tabCaso:formFluxo" />
	            			</h:panelGrid>
	            		</h:form>
            	
            			<h:form id="formFluxo">
            				<p:dataTable var="fluxo" value="#{fluxoMB.fluxos}" style="width:600px">
	            				<f:facet name="header">
	            					Fluxos
	            				</f:facet>
	            				<p:column headerText="Código" style="width:10%">
	            					<p:commandLink action="#{fluxoMB.adicionaPasso}">
            							<h:outputText value="#{fluxo.codigo}" />
            						</p:commandLink>
            					</p:column>
            					<p:column headerText="Tipo" style="width:20%">
            						<h:outputText value="#{fluxo.tipo}" />
            					</p:column>
            					<p:column headerText="Nome" style="width:60%">
            						<h:outputText value="#{fluxo.nome}" />
            					</p:column>
            					<p:column style="width:10%">
            						<p:commandButton actionListener="#{fluxoMB.escolhe}" update=":formRemoverFluxo" oncomplete="modalRemoverFluxo.show();" icon="ui-icon-trash" />
            					</p:column>
            				</p:dataTable>
            			</h:form>
            		
            		</p:tab>
            	</p:tabView>
            </p:fieldset>
            
            
            <p:dialog header="Remover Ator" widgetVar="modalRemoverAtor" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverAtor">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover o Ator: #{casoDeUsoAtorMB.casoAtor.ator} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{casoDeUsoAtorMB.remover}" update=":tabCaso:formAtores" oncomplete="modalRemoverAtor.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverAtor.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
            
            <p:dialog header="Remover Pré-Condição" widgetVar="modalRemoverPre" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverPre">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover a pré-condição: #{preCondicaoMB.pre.descricao} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{preCondicaoMB.remover}" update=":tabCaso:formPre" oncomplete="modalRemoverPre.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverPre.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
			
			<p:dialog header="Remover Pós-Condição" widgetVar="modalRemoverPos" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverPos">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover a pós-condição: #{posCondicaoMB.pos.descricao} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{posCondicaoMB.remover}" update=":tabCaso:formPos" oncomplete="modalRemoverPos.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverPos.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
			
			<p:dialog header="Remover Regra de Negócio" widgetVar="modalRemoverRegra" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverRegra">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover a Regra de Negócio: #{regraDeNegocioMB.regra.descricao} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{regraDeNegocioMB.remover}" update=":tabCaso:formRegra" oncomplete="modalRemoverRegra.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverRegra.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
			
			<p:dialog header="Remover Requisito Não Funcional" widgetVar="modalRemoverRequisito" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverRequisito">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover o Requisito Não Funcional: #{requisitoNaoFuncionalMB.req.descricao} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{requisitoNaoFuncionalMB.remover}" update=":tabCaso:formRequisito" oncomplete="modalRemoverRequisito.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverRequisito.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
			
			<p:dialog header="Remover Fluxo" widgetVar="modalRemoverFluxo" showEffect="clip" hideEffect="explode">
				<h:form id="formRemoverFluxo">
					<p:panelGrid columns="1">
						<h:outputLabel value="Tem certeza de que deseja remover o Fluxo: #{fluxoMB.fluxo.nome} ?" style="font:14px" />
						<f:facet name="footer">
							<p:commandButton value="Sim" actionListener="#{fluxoMB.remover}" update=":tabCaso:formFluxo" oncomplete="modalRemoverFluxo.hide()" />
							<p:commandButton value="Não" oncomplete="modalRemoverFluxo.hide()" />
						</f:facet>
					</p:panelGrid>
				</h:form>
			</p:dialog>
           
        </ui:define>
    </ui:decorate>
</html>