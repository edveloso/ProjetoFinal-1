<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:decorate template="/template/template.xhtml">
    	<ui:define name="title">
    		Casos de Uso
    	</ui:define>
        <ui:define name="conteudo">
            <p:commandButton value="Novo" onclick="modalNovoCaso.show();" />

			<br />
			<br />
			
			<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />

			<h:form id="formLista">
				<p:dataTable var="caso" value="#{casoDeUsoMB.casosDeUso}" style="width:800px">
					<f:facet name="header">  
			            Casos de Uso  
			        </f:facet>
			        <p:column headerText="Código" style="width:20%">
						<h:outputText value="#{caso.codigo}" />
					</p:column>
					<p:column headerText="Nome" style="width:60%">
						<h:outputText value="#{caso.nome}" />
					</p:column>
					<p:column style="width:10%">
						<p:commandButton actionListener="#{casoDeUsoMB.escolheCaso}" action="#{casoDeUsoMB.atualizaCaso}" icon="ui-icon-pencil" />
					</p:column>
					<p:column style="width:10%">
						<p:commandButton actionListener="#{casoDeUsoMB.escolheCaso}" update=":formRemoverCaso" oncomplete="modalRemoverCaso.show();" icon="ui-icon-trash" />
					</p:column>
				</p:dataTable>
			</h:form>
			
			<p:dialog header="Remover Caso de Uso" widgetVar="modalRemoverCaso" showEffect="clip" hideEffect="explode">
			<h:form id="formRemoverCaso">
				<p:panelGrid columns="1">
					<h:outputLabel value="Tem certeza de que deseja remover o caso de uso #{casoDeUsoMB.casoDeUso.nome} ?" style="font:14px" />
					<f:facet name="footer">
						<p:commandButton value="Sim" actionListener="#{casoDeUsoMB.remover}" update=":formLista" oncomplete="modalRemoverCaso.hide()" />
						<p:commandButton value="Não" oncomplete="modalRemoverCaso.hide()" />
					</f:facet>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		
		<p:dialog header="Cadastrar Caso de Uso" widgetVar="modalNovoCaso" showEffect="clip" hideEffect="explode">
			<h:form id="formNovoCaso">
	            <p:fieldset legend="Dados do Caso de Uso">
	            	 <h:panelGrid columns="2">
			            <p:outputLabel value="Código" />
	            		<p:inputText value="#{casoDeUsoMB.casoDeUso.codigo}" size="10" />
	            		<p:outputLabel value="Nome" />
	            		<p:inputText value="#{casoDeUsoMB.casoDeUso.nome}" size="30" />
	            		<p:outputLabel value="Objetivo" />
	            		<p:inputTextarea cols="32" rows="5" autoResize="false" value="#{casoDeUsoMB.casoDeUso.objetivo}" />
	            	</h:panelGrid>
	            	<p:commandButton value="Gravar" actionListener="#{casoDeUsoMB.salvar}" update=":formLista" oncomplete="modalNovoCaso.hide()" />
	            	<p:commandButton value="Limpar" />
	            </p:fieldset>
            </h:form>
		</p:dialog>

        </ui:define>
    </ui:decorate>
</html>